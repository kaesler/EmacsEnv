(setq toolbar-sort-icon (make-list 6 (make-glyph
				       [xpm :data
					    "/* XPM */
static char *graph_icon[] = {
\"36 30 4 1\",
\"         c Gray75\",
\"W        c White\",
\"x        c Gray50\",
\".        c Black\",
\"                                    \",
\"   WWWWWWWW               ........  \",
\"   WWWWWWWW               ........  \",
\"                                    \",
\"   ........               ........  \",
\"   ........               ........  \",
\"                                    \",
\"   ........      ..       xxxxxxxx  \",
\"   ........        ..     xxxxxxxx  \",
\"                     ..             \",
\"   xxxxxxxx   ..........  xxxxxxxx  \",
\"   xxxxxxxx          ..   xxxxxxxx  \",
\"                   ..               \",
\"   WWWWWWWW      ..       WWWWWWWW  \",
\"   WWWWWWWW               WWWWWWWW  \",
\"                                    \",
\"   xxxxxxxx               WWWWWWWW  \",
\"   xxxxxxxx               WWWWWWWW  \",
\"                                    \",
\"   WWWWWWWW               WWWWWWWW  \",
\"   WWWWWWWW               WWWWWWWW  \",
\"                                    \",
\"                                    \",
\"  .....                             \",
\" .     .                    .       \",
\" .                        .....     \",
\"  .....     ..    . ...     .       \",
\"       .   .  .   ..   .    .       \",
\" .     .   .  .   .         .       \",
\"  .....     ..    .         .       \"};"] 'buffer)))

(setq toolbar-help-icon (make-list 6 (make-glyph
				       [xpm :data
					    "/* XPM */
static char *graph_icon[] = {
\"36 30 4 1\",
\"         c Gray75\",
\"W        c White\",
\"x        c Gray50\",
\".        c Black\",
\"                  x...x             \",
\"             x............x         \",
\"           x....x      x....x       \",
\"        x....x           x....x     \",
\"       x....x              x...x    \",
\"     x...x                  x...x   \",
\"     ...x                    x...x  \",
\"                             x...x  \",
\"                              x...x \",
\"                              x...x \",
\"                              x...x \",
\"                              x...x \",
\"                             x...x  \",
\"                             x...x  \",
\"                            x...x   \",
\"                           x...x    \",
\"                         x...x      \",
\"                       x...x        \",
\"                    xx...x          \",
\"                   ...xx            \",
\"                   ...x             \",
\"                   ...              \",
\"  WW   WW  WWWWWW  ... WW    WWWW   \",
\"  WW   WW  W       ... WW    W   W  \",
\"  WW   WW  W           WW    W    W \",
\"  WWWWWWW  WWWW    x.x WW    WWWWW  \",
\"  WWWWWWW  W       ... WW    W      \",
\"  WW   WW  W       x.x WW    W      \",
\"  WW   WW  W           WW    W      \",
\"  WW   WW  WWWWWW      WWWWW W      \"};"] 'buffer)))

(setq toolbar-graph-icon (make-list 6 (make-glyph
				       [xpm :data
					    "/* XPM */
static char *graph_icon[] = {
\"36 30 4 1\",
\"         c Gray75\",
\"W        c White\",
\"x        c Gray50\",
\".        c Black\",
\"                                    \",
\"                         xxxxxxxxxxx\",
\"                         xxxxxxxxxxx\",
\"                         xxxxxxxxxxx\",
\"                         xxxxxxxxxxx\",
\"                         xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\"             ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" WWWWWWWWWWW ........... xxxxxxxxxxx\",
\" ...................................\",
\"   ...                        .     \",
\"  .        . ...   ...   ...  .     \",
\" .    ...  ..   . .   .  .  . . ..  \",
\"  .    .   .      .   .  ...  ..  . \",
\"   ....    .       ... . .    .   . \",
\"                         .          \"};"] 'buffer)))

(setq toolbar-resto-icon (make-list 6 (make-glyph
				       [xpm :data
					    "/* XPM */
static char *graph_icon[] = {
\"36 30 4 1\",
\"         c Gray75\",
\"W        c White\",
\"x        c Gray50\",
\".        c Black\",
\"                                    \",
\" .....                .....         \",
\"  .....              .....          \",
\"   ..W..            ..W..           \",
\"    ..W..          ..W..            \",
\"     ..W..        ..W..             \",
\"      ..W..      ..W..              \",
\"       ..W..    ..W..               \",
\"        ..W..  ..W..                \",
\"         ..W....W..                 \",
\"          ..W..W..                  \",
\"           ..WW..                   \",
\"          ..W..W..                  \",
\"         ..W....W..                 \",
\"        ..W..  ..W..                \",
\"       ..W..    ..W..               \",
\"      ..W..      ..W..              \",
\"     ..W..        ..W..             \",
\"    ..W..          ..W..            \",
\"   ..W..            ..W..           \",
\"  .....              .....          \",
\" .....                .....         \",
\"                                    \",
\" ...................................\",
\"                                    \",
\" .   .  .....                       \",
\"  . .   .      . . .    ..    .. ...\",
\"   .    ...    .. . .  .  .  .   .. \",
\"  . .   .      .  . .  .  .  .    ..\",
\" .   .  .....  .  . .   .. .  .. ...\"};"] 'buffer)))

(setq toolbar-copy-vals-icon (make-list 6 (make-glyph
				       [xpm :data
					    "/* XPM */
static char *graph_icon[] = {
\"36 30 4 1\",
\"         c Gray75\",
\"X        c White\",
\"o        c Gray50\",
\".        c Black\",
\"       .........                    \",
\"       .XXXXXXX..                   \",
\"       .XXXXXXX.o.                  \",
\"       .X.....X....                 \",
\"       .XXXXXXXXXX.                 \",
\"       .X....XXXXX.                 \",
\"       .XXXXXXXXXX.                 \",
\"       .XXXXX.........              \",
\"       .X..XX.XXXXXXX..             \",
\"       .XXXXX.XXXXXXX.o.            \",
\"       .XXXXX.X.....X....           \",
\"       .XXXXX.XXXXXXXXXX.           \",
\"       .XXXXX.X....XX XX.           \",
\"       ....... XXX XXX X.           \",
\"             .X X X X X .           \",
\"               ....... X            \",
\"              X X X X X             \",
\"               X X X X X            \",
\"   ...        X   X   X             \",
\"  .   .  ..      X   X              \",
\"  .     .  . ...  .  .              \",
\"  .     .  . .  . .  .              \",
\"  .   . .  . .  . .  .              \",
\"   ...   ..  .  .  ..               \",
\"             ...    .               \",
\" .   . ....  .   . .         ..  ...\",
\" .   .    .  .   .   .   .  .  . .  \",
\" .   . .....     .   .   .  .... ...\",
\"  . .  .   .     .   .   .  .      .\",
\"   .   ......    .    ....   ... ...\"};"] 'buffer)))



(setq toolbar-eshto-icon (make-list 6 (make-glyph
				       [xpm :data
					    "/* XPM */
static char *graph_icon[] = {
\"36 30 2 1\",
\"         c Gray75\",
\".        c Black\",
\"       . .... .... ... ....         \",
\"     ... .... .... ... .... ...     \",
\"                                    \",
\"  .. ... .... .... ... .... ... .   \",
\" ... ... .... .... ... .... ... ..  \",
\" ... ... .... .... ... .... ... ..  \",
\"                                    \",
\" ... ... ..               . ... ..  \",
\" ... ...                    ... ..  \",
\" ... ..                      .. ..  \",
\"                                    \",
\" ... ... .... .... ... .... ... ..  \",
\" ... ... .... .... ... .... ... ..  \",
\" ... ... .... .... ... .... ... ..  \",
\" ... ... .... .... ... .... ... ..  \",
\" ... ... .... .... ... .... ... ..  \",
\" ... ... .... .... ... .... ... ..  \",
\"                                    \",
\" ... ..                             \",
\" ... .                              \",
\"                                    \",
\" ... ...                        ..  \",
\" ... ... .                     ...  \",
\"                             .....  \",
\" ... ... ....             ........  \",
\" ... ... .... .... ... ...........  \",
\"  .. ... .... .... ... ...........  \",
\"  .. ... .... .... ... ...........  \",
\"     ... .... .... ... ...........  \",
\"       . .... .... ... ...........  \"};"] 'buffer)))

(defun esheet-help ()
  (interactive)
  (let ((p (catch 'found
	     (dolist (s load-path nil)
	       (if (equal (substring s (- (length s) 7)) "esheet/") 
		   (throw 'found s))))))
    (if p 
	(progn
	  (browse-url-netscape (concat p "esheet-documentation.html") nil)
	  (message "Please Wait, loading netscape..."))
      (message "No help available!"))))

(defun restore-regular-toolbar ()
  (interactive)
  (set-specifier top-toolbar-visible-p t)
  (set-specifier left-toolbar-visible-p nil)
  (redraw-frame))

(defun re-activate-esheet-toolbar ()
  (interactive)
  (set-specifier top-toolbar-visible-p nil)
  (set-specifier left-toolbar-visible-p t))

(defun establish-esheet-toolbar ()
  (set-specifier left-toolbar nil)
  (toolbar-add-item [toolbar-eshto-icon re-activate-esheet-toolbar t "Restore the Esheet toolbar"] 0 top-toolbar)
  (toolbar-add-item [toolbar-resto-icon restore-regular-toolbar t "Restore the regular XEmacs toolbar"] 0 left-toolbar)
  (toolbar-add-item [toolbar-help-icon  esheet-help t "Help!"] 0 left-toolbar)
  (toolbar-add-item [toolbar-sort-icon  sort-region t "Sort the region"] 0 left-toolbar)
  (toolbar-add-item [toolbar-graph-icon graph-region t "Graph the region"] 0 left-toolbar)
  (toolbar-add-item [toolbar-undo-icon  toolbar-undo t "Undo!"] 0 left-toolbar)
  (toolbar-add-item [toolbar-paste-icon esheet-paste t "Paste (Esheet)"] 0 left-toolbar)
  (toolbar-add-item [toolbar-copy-vals-icon  esheet-copy-values t "Copy (Esheet)"] 0 left-toolbar)
  (toolbar-add-item [toolbar-copy-icon  esheet-copy t "Copy (Esheet)"] 0 left-toolbar)
  (toolbar-add-item [toolbar-cut-icon   esheet-cut t "Cut (Esheet)"] 0 left-toolbar)
  (toolbar-add-item [toolbar-disk-icon  esheet-save t "Save (Esheet)"] 0 left-toolbar)
  (toolbar-add-item [toolbar-file-icon  toolbar-open   t "Open a File"] 0 left-toolbar)
  (set-specifier top-toolbar-visible-p nil)
  (set-specifier left-toolbar-visible-p t)
  (set-specifier left-toolbar-width 37)
  (redraw-frame))

